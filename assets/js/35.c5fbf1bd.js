(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{353:function(s,a,t){"use strict";t.r(a);var n=t(7),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"简单的makefile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简单的makefile"}},[s._v("#")]),s._v(" 简单的makefile")]),s._v(" "),a("p",[s._v("1、")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("main.o sub.o mul.o\n\tgcc main.o sub.o mul.o -o app\n\tgcc "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$^")]),s._v(" -o "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# makefile中的自动变量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$<")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 规则中的第一个依赖\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 规则中的目标\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$^")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 规则中的所有依赖\n只能在规则的命令中使用\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 模式规则")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("%.o")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("%.c\n\tgcc -c "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$<")]),s._v(" -o "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v("\n\t\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("2、用了变量")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[s._v("obj"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("main.o sub.o mul.o\ntarget"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("app\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# makefile中自己维护的变量")]),s._v("\nCC "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" gcc\nCPPFLAGS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" -I\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),s._v("(target)")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" -o "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("%.o")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("%.c\n\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" -c "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$<")]),s._v(" -o "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("3、使用makefile中的函数")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#obj=main.o sub.o mul.o")]),s._v("\ntarget"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("app\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# makefile中自己维护的变量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# makefile中的函数的使用")]),s._v("\nsrc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wildcard")]),s._v(" ./*.c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查找指定目录下，指定类型的文件")]),s._v("\nobj"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("patsubst")]),s._v(" ./%.c, ./%.o, "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 匹配替换函数，把.c替换成.o的")]),s._v("\nCC "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" gcc\nCPPFLAGS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" -I\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),s._v("(target)")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" -o "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("%.o")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("%.c\n\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" -c "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$<")]),s._v(" -o "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin-target builtin"}},[s._v(".PHONY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("clean\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("clean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\t-mkdir /aa  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -执行失败，直接忽略")]),s._v("\n\t-rm "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" -f\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("hello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\techo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello, makefile"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("h3",{attrs:{id:"基本原则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本原则"}},[s._v("#")]),s._v(" 基本原则")]),s._v(" "),a("p",[a("img",{attrs:{src:"/assets/1_makefile_basic_principle.png",alt:"1_makefile基本原则"}})]),s._v(" "),a("h2",{attrs:{id:"文件的命名规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件的命名规则"}},[s._v("#")]),s._v(" 文件的命名规则")]),s._v(" "),a("p",[s._v("Makefile\nmakefile")]),s._v(" "),a("h2",{attrs:{id:"用途"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用途"}},[s._v("#")]),s._v(" 用途")]),s._v(" "),a("ul",[a("li",[s._v("项目代码编译管理")]),s._v(" "),a("li",[s._v("节省编译项目的时间")]),s._v(" "),a("li",[s._v("一次编写终身受益")])]),s._v(" "),a("h2",{attrs:{id:"基本规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本规则"}},[s._v("#")]),s._v(" 基本规则")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[s._v("基本规则\n\t\n\t\t目标：依赖\n（tab）命令\n\t\t\t目标 --\x3e 要生成的目标文件\n\t\t\t依赖 --\x3e 生成目标文件需要的一些文件\n\t\t\t命令 --\x3e 借助依赖文件生成目标文件的手段\n\t\t\ttab --\x3e 缩进，有且只有一个\n\t\t\t三要素\n\t\tMakefile会把规则中的第一个目标作为终极目标\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("\t\t\tall")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("app --\x3e all指定生成的最终目标为app\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h2",{attrs:{id:"工作原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工作原理"}},[s._v("#")]),s._v(" 工作原理")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[s._v("工作原理\n\t若想生成目标，检查规则中的依赖条件是否存在，\n\n        如果不存在，寻找是否有规则用来生成该依赖文件\n            检查规则中的目标是否需要更新，必须检查它的所有依赖，\n\n        依赖中有任意一个被更新，则目标必须更新\n                依赖文件比目标文件时间晚，则需要更新\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("img",{attrs:{src:"/assets/2_makefile_work_principle.png",alt:"2_makefile工作原理-1"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/assets/3_makefile_work_principle_2.png",alt:"3_makefile工作原理-2"}})]),s._v(" "),a("h2",{attrs:{id:"执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行"}},[s._v("#")]),s._v(" 执行")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[s._v("执行\n\tmake --\x3e 通过makefile生成目标文件\n\t\t直接 make （使用makefile文件）\n\t\tmake -f mm "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("指定一个名字不为makefile的文件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tmake clean --\x3e 清除编译生成的中间.o文件和最终目标文件\n\t\t如果当前目录下有同名clean文件，则不执行clean对应的命令\n\t\t\t解决方案 --\x3e 伪目标声明："),a("span",{pre:!0,attrs:{class:"token builtin-target builtin"}},[s._v(".PHONY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("clean\n\t\t特殊符号\n\t\t\t- ：表示此条命令出错，make也会继续执行后续的命令。如：“-rm a.o b.o”\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量"}},[s._v("#")]),s._v(" 变量")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[s._v("变量\n\t普通变量\n\t\t变量定义及赋值：obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" a.o b.o c.o\n\t\t变量取值：foo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t由 Makefile 维护的一些变量\n\t\t\t通常格式都是大写\n\t\t\t\tCC：默认值 cc\n\t\t\t有些有默认值，有些没有\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("\t\t\t\tCPPFLAGS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 预处理器需要的选项 如：-I\n\t\t\t\tCFLAGS：编译的时候使用的参数 –Wall –g -c\n\t\t\t\tLDFLAGS ：链接库使用的选项 –L -l\n\t\t\t用户可以修改这些变量的默认值\n\t\t\t\tCC "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" gcc\n\t自动变量\n\t\t变量\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v(" --\x3e 规则中的目标\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$<")]),s._v(" --\x3e 规则中的第一个依赖条件\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$^")]),s._v(" --\x3e 规则中的所有依赖条件\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 都是在规则中的命令中使用")]),s._v("\n\t\t模式规则\n\t\t\t在规则的目标定义中使用 %\n\t\t\t在规则的依赖条件中使用 %\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# % 表示一个或者多个")]),s._v("\n\t\t\t示例：\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("\t\t\t\t%.o")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("%.c\n\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" –c  "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$<")]),s._v(" -o "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$<")]),s._v(" --\x3e 表示依次取出依赖条件\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v(" --\x3e 表示依次取出目标值\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])]),a("h2",{attrs:{id:"函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数"}},[s._v("#")]),s._v(" 函数")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[s._v("函数\n\tmakefile中所有的函数必须都有返回值\n\twildcard\n\t\t查找指定目录下指定类型的文件，一个参数\n\t\tsrc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$（wildcard")]),s._v(" ./src/*.c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t\t找到./src 目录下所有后缀为.c的文件，赋给变量src\n\tpatsubst\n\t\t匹配替换，从src中找到所有.c 结尾的文件，并将其替换为.o\n\t\tobj "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("patsubst")]),s._v(" %.c ,%.o ,"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t\t把src变量中所有后缀为.c的文件替换成.o\n\t\tob "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("patsubst")]),s._v(" ./src/%.c, ./obj/%.o, "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("src"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t\t指定.o 文件存放的路径 ./obj/%.o\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);