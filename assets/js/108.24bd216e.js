(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{424:function(s,_,t){"use strict";t.r(_);var v=t(7),a=Object(v.a)({},(function(){var s=this,_=s._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[_("h1",{attrs:{id:"acl-acess-control-list-接入控制列表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#acl-acess-control-list-接入控制列表"}},[s._v("#")]),s._v(" ACL（ACESS CONTROL LIST 接入控制列表）")]),s._v(" "),_("h2",{attrs:{id:"_1、为什么用-acl-acess-control-list-接入控制列表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1、为什么用-acl-acess-control-list-接入控制列表"}},[s._v("#")]),s._v(" 1、为什么用 ACL（ACESS CONTROL LIST 接入控制列表）")]),s._v(" "),_("p",[s._v("两个方向：")]),s._v(" "),_("p",[s._v("向外")]),s._v(" "),_("p",[s._v("限制内网某些主机不能上外网")]),s._v(" "),_("p",[s._v("向内")]),s._v(" "),_("p",[s._v("财务部门的信息一般比较机密，所以其他部门不能访问。")]),s._v(" "),_("p",[s._v("ACL 的两大主要功能：流量控制 ，匹配感兴趣流量")]),s._v(" "),_("h2",{attrs:{id:"_2、acl-类型-标准访问控制列表-扩展访问控制列表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2、acl-类型-标准访问控制列表-扩展访问控制列表"}},[s._v("#")]),s._v(" 2、ACL 类型：标准访问控制列表，扩展访问控制列表")]),s._v(" "),_("h3",{attrs:{id:"_2-1-标准访问控制列表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-标准访问控制列表"}},[s._v("#")]),s._v(" 2.1 标准访问控制列表")]),s._v(" "),_("ul",[_("li",[s._v("只能根据源地址做过滤（限制 穿越路由器的流量）")]),s._v(" "),_("li",[s._v("针对整个协议采取相关动作（允许或禁止），不能限制特定的流量")])]),s._v(" "),_("h3",{attrs:{id:"_2-2-扩展访问列表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-扩展访问列表"}},[s._v("#")]),s._v(" 2.2 扩展访问列表")]),s._v(" "),_("ul",[_("li",[s._v("能根据源、目的地地址，端口号等等进行过滤。")])]),s._v(" "),_("p",[s._v("根据源地址禁止流量穿越路由器。")]),s._v(" "),_("p",[s._v("根据目的地址，主机的流量可以穿越路由器，去往目的地址的流量则被丢弃")]),s._v(" "),_("ul",[_("li",[s._v("能允许或拒绝特定的协议。")])]),s._v(" "),_("p",[s._v("禁止 ICMP 包，导致主机 ping 不通但是主机却能连接服务器")]),s._v(" "),_("h3",{attrs:{id:"_2-3命名的访问控制列表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-3命名的访问控制列表"}},[s._v("#")]),s._v(" 2.3命名的访问控制列表")]),s._v(" "),_("p",[s._v("标准访问列表和扩展访问列表的另外一种表达形式。")]),s._v(" "),_("h2",{attrs:{id:"_3、acl的操作"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3、acl的操作"}},[s._v("#")]),s._v(" 3、ACL的操作")]),s._v(" "),_("p",[_("strong",[s._v("入站和出站")])]),s._v(" "),_("p",[_("img",{attrs:{src:"/assets/1683164903782.png",alt:"1683164903782"}})]),s._v(" "),_("ul",[_("li",[s._v("ACL 策略是应用在接口的。")]),s._v(" "),_("li",[s._v("配置入站 ACL 策略后，如果流量时从左向右，若匹配到策略则丢弃。而流量从右向左进入路由在入站的 ACL 的则没作用。")]),s._v(" "),_("li",[s._v("配置出站 ACL 策略后则相反。")])]),s._v(" "),_("h3",{attrs:{id:"_3-1-入方向的-acl-的操作"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-入方向的-acl-的操作"}},[s._v("#")]),s._v(" 3.1 入方向的 ACL 的操作")]),s._v(" "),_("p",[_("img",{attrs:{src:"/assets/1683684339417.png",alt:"1683684339417"}})]),s._v(" "),_("p",[s._v("先匹配 ACL 策略再路由或丢弃")]),s._v(" "),_("h3",{attrs:{id:"_3-2-出方向的-acl-操作"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-出方向的-acl-操作"}},[s._v("#")]),s._v(" 3.2 出方向的 ACL 操作")]),s._v(" "),_("p",[_("img",{attrs:{src:"/assets/1683684544921.png",alt:"1683684544921"}})]),s._v(" "),_("p",[s._v("先路由，若出接口配置 ACL 则进行 ACL 策略匹配")]),s._v(" "),_("h3",{attrs:{id:"_3-3-acl格式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-acl格式"}},[s._v("#")]),s._v(" 3.3 ACL格式")]),s._v(" "),_("p",[_("img",{attrs:{src:"/assets/1683684556827.png",alt:"img"}})]),s._v(" "),_("ul",[_("li",[s._v("ACL 由很多语句组成（二元语句：条件、动作）")]),s._v(" "),_("li",[s._v("流量由上往下匹配各条件")]),s._v(" "),_("li",[s._v("数据包如果被一个条件匹配后不会再继续往下匹配了")]),s._v(" "),_("li",[s._v("如果到最后都没匹配到。默认丢弃。")])]),s._v(" "),_("h3",{attrs:{id:"_3-4-acl-的标识"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-acl-的标识"}},[s._v("#")]),s._v(" 3.4 ACL 的标识")]),s._v(" "),_("p",[_("img",{attrs:{src:"/assets/1683687035818.png",alt:"1683687035818"}})]),s._v(" "),_("p",[s._v("常用：")]),s._v(" "),_("p",[s._v("标准 访问控制列表：1-99")]),s._v(" "),_("p",[s._v("扩展 100-199")]),s._v(" "),_("h2",{attrs:{id:"_4、配置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4、配置"}},[s._v("#")]),s._v(" 4、配置")]),s._v(" "),_("p",[s._v("ACL 的查看")]),s._v(" "),_("p",[s._v("Router# show access-lists {access-list number|name}")]),s._v(" "),_("h3",{attrs:{id:"_4-1-标准访问控制列表配置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-标准访问控制列表配置"}},[s._v("#")]),s._v(" 4.1 标准访问控制列表配置")]),s._v(" "),_("p",[_("img",{attrs:{src:"/assets/1683687131420.png",alt:"1683687131420"}})]),s._v(" "),_("p",[_("strong",[s._v("Router（config）#access-list access-list-number {permit|deny} source [wildcard mask]")])]),s._v(" "),_("p",[s._v("编号选择：1-99 或者 1300-1999")]),s._v(" "),_("p",[s._v("通配符，缺省值 0.0.0.0")]),s._v(" "),_("p",[_("strong",[s._v("“no access-list access-list-number”将会删除整个 ACL列表")])]),s._v(" "),_("p",[_("strong",[s._v("Ip access-group access-list number {in|out}")])]),s._v(" "),_("p",[s._v("在接口应用")]),s._v(" "),_("p",[s._v("应用时关联入或出站方向")]),s._v(" "),_("p",[s._v("默认出站")]),s._v(" "),_("p",[s._v("**“no ip access-group access-list-number”**可移除接口上应用的访问列表")]),s._v(" "),_("p",[s._v("例子 1：")]),s._v(" "),_("p",[_("img",{attrs:{src:"/assets/1683689141235.png",alt:"1683689141235"}})]),s._v(" "),_("p",[s._v("Route(config)#access-list 1 deny 192.168.1.1 0.0.0.0")]),s._v(" "),_("p",[s._v("Route(config)#access-list 1 permit any")]),s._v(" "),_("p",[s._v("Route(config)#interface e0")]),s._v(" "),_("p",[s._v("Route(config-if)#ip access-group 1 in")]),s._v(" "),_("p",[s._v("例子 2：")]),s._v(" "),_("p",[_("img",{attrs:{src:"/assets/1683689230734.png",alt:"1683689230734"}})]),s._v(" "),_("p",[s._v("Route(config)#access-list 1 deny 192.168.1.0 0.0.0.31 （写策略）")]),s._v(" "),_("p",[s._v("Route(config)#access-list 1 permit any")]),s._v(" "),_("p",[s._v("Route(config)#interface e0（进接口）")]),s._v(" "),_("p",[s._v("Route(config-if)#ip access-group 1 in（在接口入方向应用策略）")]),s._v(" "),_("p",[_("strong",[s._v("总结：")])]),s._v(" "),_("ul",[_("li",[s._v("写策略（必须写一条允许全部通过的策略，因为策略默认拒绝所有）")]),s._v(" "),_("li",[s._v("在接口中应用")])]),s._v(" "),_("p",[s._v("应用时关联入或出站方向")]),s._v(" "),_("h3",{attrs:{id:"_4-2-扩展访问控制列表配置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-扩展访问控制列表配置"}},[s._v("#")]),s._v(" 4.2 扩展访问控制列表配置")]),s._v(" "),_("p",[_("img",{attrs:{src:"/assets/1683689282525.png",alt:"1683689282525"}})]),s._v(" "),_("p",[_("strong",[s._v("Router（config）")]),s._v("#access-list access-list-number {permit|deny} protocol source")]),s._v(" "),_("p",[_("strong",[s._v("source-wildcard [operate port] destination destination-wildcard [operate port]")])]),s._v(" "),_("p",[_("strong",[s._v("[establish] [log]")])]),s._v(" "),_("p",[_("strong",[s._v("Router(config-if)#ip access-group access-list-number{in|out}")])]),s._v(" "),_("p",[s._v("在接口中应用")]),s._v(" "),_("p",[s._v("应用时关联入或出站方向")]),s._v(" "),_("p",[s._v("例子 1：")]),s._v(" "),_("p",[_("img",{attrs:{src:"/assets/1683689418607.png",alt:"1683689418607"}})]),s._v(" "),_("p",[s._v("Router(config)#access-list 100 deny ip 192.168.1.0 0.0.0.31 192.168.200 0.0.0.0Router(config)#access-list 100 permit any")]),s._v(" "),_("p",[s._v("Router(config)#interface e0")]),s._v(" "),_("p",[s._v("Router(config-if)#access-group 100 in")]),s._v(" "),_("p",[s._v("例子 2：")]),s._v(" "),_("p",[_("img",{attrs:{src:"/assets/1683689426734.png",alt:"1683689426734"}})]),s._v(" "),_("p",[s._v("Router(config)#access-list 100 deny tcp 192.168.1.0 0.0.0.255 192.168.2.0 0.0.0.255 eq 23")]),s._v(" "),_("p",[s._v("Router(config)#access-list 100 permit any")]),s._v(" "),_("p",[s._v("Router(config)#interface e0")]),s._v(" "),_("p",[s._v("Router(config-if)#access-group 100 in")]),s._v(" "),_("h3",{attrs:{id:"_4-3-命名访问控制列表配置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-命名访问控制列表配置"}},[s._v("#")]),s._v(" 4.3 命名访问控制列表配置")]),s._v(" "),_("p",[_("strong",[s._v("标准访问控制列表和扩展访问控制列表的缺点：")])]),s._v(" "),_("p",[s._v("1 无法编辑，删改，添加 （条件）")]),s._v(" "),_("p",[s._v("2 删除时删除整个列表")]),s._v(" "),_("p",[s._v("3 使用数字编号不直观")]),s._v(" "),_("p",[_("strong",[s._v("命名访问控制列表可以使用字符串命名访问控制列表，并且能删除，添加条件")])]),s._v(" "),_("p",[_("strong",[s._v("配置：")])]),s._v(" "),_("p",[s._v("① "),_("strong",[s._v("Router（config）# ip access-list {standard|extended} name")])]),s._v(" "),_("p",[s._v("② "),_("strong",[s._v("Router(config {std- | ext-}nacl)#")])]),s._v(" "),_("p",[_("strong",[s._v("[sequence-number] {permit | deny} {ip access list test conditions} {permit | deny} {ip access list test conditions}")])]),s._v(" "),_("p",[s._v("序列号默认从 10 开始，并每次增加 10。")]),s._v(" "),_("p",[s._v("③ "),_("strong",[s._v("ip access-group access-list-number { in | out }")])]),s._v(" "),_("p",[s._v("access-list-number 使用 name.")]),s._v(" "),_("h2",{attrs:{id:"_5、总结"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5、总结"}},[s._v("#")]),s._v(" 5、总结")]),s._v(" "),_("ul",[_("li",[_("p",[s._v("通过数字标识 ACL 时（1-99 标识标准访问控制列表，100-199 标识扩展访问控制列表）")])]),s._v(" "),_("li",[_("p",[s._v("另一种标识 ACL 的方式是使用命名访问控制列表。")])]),s._v(" "),_("li",[_("p",[s._v("在 ACL 中默认拒绝所有，应该配置一条允许所有的策略")])]),s._v(" "),_("li",[_("p",[s._v("在配置的时候先写策略后，在接口应用时要出入站")])]),s._v(" "),_("li",[_("p",[s._v("在某个接口的某个特定方向（in，out），针对某种协议，只能应用一个 ACL。")])]),s._v(" "),_("li",[_("p",[s._v("ACL 不能对本地始发的流量过滤。只能对穿越路由器的的流量做过滤")])]),s._v(" "),_("li",[_("p",[s._v("尽可能的把 IP 标准 ACL 放置在离目标地址近的地方;尽可能的把 IP 扩展 ACL 放置在离源地址近的地方")])]),s._v(" "),_("li",[_("p",[s._v("每个接口,每个方向,每种协议,你只能设置 1 个 ACL")])]),s._v(" "),_("li",[_("p",[s._v("你不可能从 ACL 从除去 1 行,除去 1 行意味你将除去整个 ACL,命名访问列表(named access lists)例外")])]),s._v(" "),_("li",[_("p",[s._v("组织好你的 ACL 的顺序,比如测试性的最好放在 ACL 的最顶部")])])])])}),[],!1,null,null,null);_.default=a.exports}}]);