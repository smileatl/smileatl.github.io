<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux系统函数 | SAL Repo</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/website_icon.png">
    <meta name="description" content="smileatl个人知识库，用于工作、学习、生活的总结。">
    <meta name="keywords" content="smileatl个人知识库，用于工作、学习、生活的总结。">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.27efc831.css" as="style"><link rel="preload" href="/assets/js/app.4813674f.js" as="script"><link rel="preload" href="/assets/js/3.cf27d530.js" as="script"><link rel="preload" href="/assets/js/97.8ce2cb69.js" as="script"><link rel="prefetch" href="/assets/js/10.57c72187.js"><link rel="prefetch" href="/assets/js/100.76551019.js"><link rel="prefetch" href="/assets/js/101.909b1f6a.js"><link rel="prefetch" href="/assets/js/102.b4df429c.js"><link rel="prefetch" href="/assets/js/103.36718b70.js"><link rel="prefetch" href="/assets/js/104.8247d5e5.js"><link rel="prefetch" href="/assets/js/105.ae996141.js"><link rel="prefetch" href="/assets/js/106.664e0ec8.js"><link rel="prefetch" href="/assets/js/107.34387111.js"><link rel="prefetch" href="/assets/js/108.24bd216e.js"><link rel="prefetch" href="/assets/js/109.0ce14ec5.js"><link rel="prefetch" href="/assets/js/11.a6b1ea70.js"><link rel="prefetch" href="/assets/js/110.225cb77d.js"><link rel="prefetch" href="/assets/js/111.987f1649.js"><link rel="prefetch" href="/assets/js/112.804919d1.js"><link rel="prefetch" href="/assets/js/113.61edc8e7.js"><link rel="prefetch" href="/assets/js/114.a2199a4f.js"><link rel="prefetch" href="/assets/js/115.919528ee.js"><link rel="prefetch" href="/assets/js/116.1e165300.js"><link rel="prefetch" href="/assets/js/117.b62cd913.js"><link rel="prefetch" href="/assets/js/118.157a5849.js"><link rel="prefetch" href="/assets/js/119.335bb0f4.js"><link rel="prefetch" href="/assets/js/12.f97190ac.js"><link rel="prefetch" href="/assets/js/120.8ca841a0.js"><link rel="prefetch" href="/assets/js/121.09ef443a.js"><link rel="prefetch" href="/assets/js/122.133de093.js"><link rel="prefetch" href="/assets/js/123.8b5fcdde.js"><link rel="prefetch" href="/assets/js/124.8aef67d0.js"><link rel="prefetch" href="/assets/js/125.07949d7c.js"><link rel="prefetch" href="/assets/js/126.6557ef27.js"><link rel="prefetch" href="/assets/js/127.e2c838f8.js"><link rel="prefetch" href="/assets/js/128.e876bdf8.js"><link rel="prefetch" href="/assets/js/129.0e7d15bb.js"><link rel="prefetch" href="/assets/js/13.ae62b090.js"><link rel="prefetch" href="/assets/js/130.8caf4288.js"><link rel="prefetch" href="/assets/js/131.d091a5f7.js"><link rel="prefetch" href="/assets/js/132.3af86ba2.js"><link rel="prefetch" href="/assets/js/133.9b473677.js"><link rel="prefetch" href="/assets/js/134.d09f520d.js"><link rel="prefetch" href="/assets/js/135.5094d6c6.js"><link rel="prefetch" href="/assets/js/136.f554265c.js"><link rel="prefetch" href="/assets/js/137.db8ad307.js"><link rel="prefetch" href="/assets/js/138.97a9f7dc.js"><link rel="prefetch" href="/assets/js/139.28a187da.js"><link rel="prefetch" href="/assets/js/14.7c89dfed.js"><link rel="prefetch" href="/assets/js/140.58f327a0.js"><link rel="prefetch" href="/assets/js/141.dac9c32e.js"><link rel="prefetch" href="/assets/js/142.15e4cd8a.js"><link rel="prefetch" href="/assets/js/143.29bcf51a.js"><link rel="prefetch" href="/assets/js/144.93e792a5.js"><link rel="prefetch" href="/assets/js/145.1e479d7f.js"><link rel="prefetch" href="/assets/js/146.fef6b20d.js"><link rel="prefetch" href="/assets/js/147.a8939180.js"><link rel="prefetch" href="/assets/js/148.73ab52d1.js"><link rel="prefetch" href="/assets/js/149.de7d77b9.js"><link rel="prefetch" href="/assets/js/15.4266d5a5.js"><link rel="prefetch" href="/assets/js/150.14cd4f5b.js"><link rel="prefetch" href="/assets/js/151.ae320b72.js"><link rel="prefetch" href="/assets/js/152.9f70308b.js"><link rel="prefetch" href="/assets/js/153.8bb08923.js"><link rel="prefetch" href="/assets/js/154.bef6a0fb.js"><link rel="prefetch" href="/assets/js/155.e0e21ff7.js"><link rel="prefetch" href="/assets/js/156.e212e95d.js"><link rel="prefetch" href="/assets/js/157.9af3323d.js"><link rel="prefetch" href="/assets/js/158.a6990b68.js"><link rel="prefetch" href="/assets/js/159.9921842e.js"><link rel="prefetch" href="/assets/js/16.4d11e9b4.js"><link rel="prefetch" href="/assets/js/160.cb690287.js"><link rel="prefetch" href="/assets/js/161.10ec68a7.js"><link rel="prefetch" href="/assets/js/162.5e2e8da5.js"><link rel="prefetch" href="/assets/js/163.7ad3dc89.js"><link rel="prefetch" href="/assets/js/164.0677e91f.js"><link rel="prefetch" href="/assets/js/165.eabba413.js"><link rel="prefetch" href="/assets/js/166.de181132.js"><link rel="prefetch" href="/assets/js/167.eb1f2c20.js"><link rel="prefetch" href="/assets/js/168.33870baa.js"><link rel="prefetch" href="/assets/js/169.0eb4e75c.js"><link rel="prefetch" href="/assets/js/17.2f17b760.js"><link rel="prefetch" href="/assets/js/170.6a8f837b.js"><link rel="prefetch" href="/assets/js/171.33c99890.js"><link rel="prefetch" href="/assets/js/172.e2ac6d6c.js"><link rel="prefetch" href="/assets/js/173.f37baa2e.js"><link rel="prefetch" href="/assets/js/174.3f1765d5.js"><link rel="prefetch" href="/assets/js/175.ee3e624a.js"><link rel="prefetch" href="/assets/js/176.b7c3d2ba.js"><link rel="prefetch" href="/assets/js/177.538dbd98.js"><link rel="prefetch" href="/assets/js/178.688b2ab3.js"><link rel="prefetch" href="/assets/js/179.7605eb3a.js"><link rel="prefetch" href="/assets/js/18.46454e6b.js"><link rel="prefetch" href="/assets/js/180.f734c479.js"><link rel="prefetch" href="/assets/js/181.f009bfc4.js"><link rel="prefetch" href="/assets/js/182.51a8e6fc.js"><link rel="prefetch" href="/assets/js/183.0f688ed3.js"><link rel="prefetch" href="/assets/js/184.e20ab6d5.js"><link rel="prefetch" href="/assets/js/185.336035f1.js"><link rel="prefetch" href="/assets/js/186.e7f18b72.js"><link rel="prefetch" href="/assets/js/187.20bae185.js"><link rel="prefetch" href="/assets/js/188.4d746641.js"><link rel="prefetch" href="/assets/js/189.45442618.js"><link rel="prefetch" href="/assets/js/19.07e2632b.js"><link rel="prefetch" href="/assets/js/190.6f6c4889.js"><link rel="prefetch" href="/assets/js/191.b73399a8.js"><link rel="prefetch" href="/assets/js/192.657f63ce.js"><link rel="prefetch" href="/assets/js/193.348754cf.js"><link rel="prefetch" href="/assets/js/194.7ea4e875.js"><link rel="prefetch" href="/assets/js/195.011c9aaa.js"><link rel="prefetch" href="/assets/js/196.30ca323d.js"><link rel="prefetch" href="/assets/js/197.b404290d.js"><link rel="prefetch" href="/assets/js/198.19eeb699.js"><link rel="prefetch" href="/assets/js/199.578524cd.js"><link rel="prefetch" href="/assets/js/20.e8632e9e.js"><link rel="prefetch" href="/assets/js/200.2483c16f.js"><link rel="prefetch" href="/assets/js/201.80be911a.js"><link rel="prefetch" href="/assets/js/202.6292d716.js"><link rel="prefetch" href="/assets/js/203.0423f992.js"><link rel="prefetch" href="/assets/js/204.220cf5d5.js"><link rel="prefetch" href="/assets/js/205.cf88ea69.js"><link rel="prefetch" href="/assets/js/206.7837a407.js"><link rel="prefetch" href="/assets/js/207.15eb7f61.js"><link rel="prefetch" href="/assets/js/208.c92b54ae.js"><link rel="prefetch" href="/assets/js/209.d6858997.js"><link rel="prefetch" href="/assets/js/21.9d97eca0.js"><link rel="prefetch" href="/assets/js/210.3a916b1e.js"><link rel="prefetch" href="/assets/js/211.99ca202d.js"><link rel="prefetch" href="/assets/js/212.18a13454.js"><link rel="prefetch" href="/assets/js/213.7eb5f7fd.js"><link rel="prefetch" href="/assets/js/214.178507b3.js"><link rel="prefetch" href="/assets/js/215.e9eac7bd.js"><link rel="prefetch" href="/assets/js/216.bdd656c6.js"><link rel="prefetch" href="/assets/js/217.487e6997.js"><link rel="prefetch" href="/assets/js/218.eb54add1.js"><link rel="prefetch" href="/assets/js/219.43da1c82.js"><link rel="prefetch" href="/assets/js/22.ed6e719f.js"><link rel="prefetch" href="/assets/js/220.757359d6.js"><link rel="prefetch" href="/assets/js/221.d58f156a.js"><link rel="prefetch" href="/assets/js/222.99dc1661.js"><link rel="prefetch" href="/assets/js/223.22a61d2b.js"><link rel="prefetch" href="/assets/js/224.514138b9.js"><link rel="prefetch" href="/assets/js/225.fc56b049.js"><link rel="prefetch" href="/assets/js/226.59d64fed.js"><link rel="prefetch" href="/assets/js/227.8841cf23.js"><link rel="prefetch" href="/assets/js/228.f37358c2.js"><link rel="prefetch" href="/assets/js/229.97cb9c4e.js"><link rel="prefetch" href="/assets/js/23.5eccc486.js"><link rel="prefetch" href="/assets/js/230.a16ada6a.js"><link rel="prefetch" href="/assets/js/231.5f761bf3.js"><link rel="prefetch" href="/assets/js/232.76d78495.js"><link rel="prefetch" href="/assets/js/233.162bba41.js"><link rel="prefetch" href="/assets/js/234.a845dfca.js"><link rel="prefetch" href="/assets/js/235.169ff72d.js"><link rel="prefetch" href="/assets/js/236.c50d9ecf.js"><link rel="prefetch" href="/assets/js/237.594eecee.js"><link rel="prefetch" href="/assets/js/238.b599dae8.js"><link rel="prefetch" href="/assets/js/239.7be81ebe.js"><link rel="prefetch" href="/assets/js/24.c81753d3.js"><link rel="prefetch" href="/assets/js/240.b9f18f9e.js"><link rel="prefetch" href="/assets/js/241.77d17f60.js"><link rel="prefetch" href="/assets/js/242.0894cddd.js"><link rel="prefetch" href="/assets/js/243.4c71e0af.js"><link rel="prefetch" href="/assets/js/244.47579b9c.js"><link rel="prefetch" href="/assets/js/245.29344e11.js"><link rel="prefetch" href="/assets/js/246.410a1027.js"><link rel="prefetch" href="/assets/js/247.b22fa817.js"><link rel="prefetch" href="/assets/js/25.f3141c92.js"><link rel="prefetch" href="/assets/js/26.573fd0de.js"><link rel="prefetch" href="/assets/js/27.9a72220d.js"><link rel="prefetch" href="/assets/js/28.e161668a.js"><link rel="prefetch" href="/assets/js/29.6d2ef014.js"><link rel="prefetch" href="/assets/js/30.0dd2ba52.js"><link rel="prefetch" href="/assets/js/31.e8c4ee1d.js"><link rel="prefetch" href="/assets/js/32.c57cfa4e.js"><link rel="prefetch" href="/assets/js/33.7c1ec4ff.js"><link rel="prefetch" href="/assets/js/34.110d90ae.js"><link rel="prefetch" href="/assets/js/35.c5fbf1bd.js"><link rel="prefetch" href="/assets/js/36.58d307d9.js"><link rel="prefetch" href="/assets/js/37.6e68d82d.js"><link rel="prefetch" href="/assets/js/38.0a2bfb96.js"><link rel="prefetch" href="/assets/js/39.79a25586.js"><link rel="prefetch" href="/assets/js/4.10092391.js"><link rel="prefetch" href="/assets/js/40.1b3fb2c7.js"><link rel="prefetch" href="/assets/js/41.2cd990a4.js"><link rel="prefetch" href="/assets/js/42.3803a3ba.js"><link rel="prefetch" href="/assets/js/43.56cde0b8.js"><link rel="prefetch" href="/assets/js/44.98f12e35.js"><link rel="prefetch" href="/assets/js/45.bbed8377.js"><link rel="prefetch" href="/assets/js/46.80af516b.js"><link rel="prefetch" href="/assets/js/47.bfe18f20.js"><link rel="prefetch" href="/assets/js/48.e4bead99.js"><link rel="prefetch" href="/assets/js/49.da1a7c67.js"><link rel="prefetch" href="/assets/js/5.0b5a1289.js"><link rel="prefetch" href="/assets/js/50.b6011d95.js"><link rel="prefetch" href="/assets/js/51.81adcdd5.js"><link rel="prefetch" href="/assets/js/52.b650e175.js"><link rel="prefetch" href="/assets/js/53.22c44460.js"><link rel="prefetch" href="/assets/js/54.3c9964c8.js"><link rel="prefetch" href="/assets/js/55.80bec639.js"><link rel="prefetch" href="/assets/js/56.2066f85f.js"><link rel="prefetch" href="/assets/js/57.ab6dbc19.js"><link rel="prefetch" href="/assets/js/58.6236e7f0.js"><link rel="prefetch" href="/assets/js/59.618e25d3.js"><link rel="prefetch" href="/assets/js/6.a1e90b5b.js"><link rel="prefetch" href="/assets/js/60.3deac196.js"><link rel="prefetch" href="/assets/js/61.890283e9.js"><link rel="prefetch" href="/assets/js/62.ffe465e9.js"><link rel="prefetch" href="/assets/js/63.cc9a42cc.js"><link rel="prefetch" href="/assets/js/64.c66e6c4f.js"><link rel="prefetch" href="/assets/js/65.95e3ddfd.js"><link rel="prefetch" href="/assets/js/66.256b023f.js"><link rel="prefetch" href="/assets/js/67.436df8a0.js"><link rel="prefetch" href="/assets/js/68.d532ffa8.js"><link rel="prefetch" href="/assets/js/69.963c3596.js"><link rel="prefetch" href="/assets/js/7.74944cf6.js"><link rel="prefetch" href="/assets/js/70.6dfd1704.js"><link rel="prefetch" href="/assets/js/71.53af90e0.js"><link rel="prefetch" href="/assets/js/72.580797e8.js"><link rel="prefetch" href="/assets/js/73.5c14d158.js"><link rel="prefetch" href="/assets/js/74.70cf381f.js"><link rel="prefetch" href="/assets/js/75.01dbab82.js"><link rel="prefetch" href="/assets/js/76.18b48db2.js"><link rel="prefetch" href="/assets/js/77.0fa8965d.js"><link rel="prefetch" href="/assets/js/78.bede6ca6.js"><link rel="prefetch" href="/assets/js/79.1c7c8167.js"><link rel="prefetch" href="/assets/js/8.fbc0181a.js"><link rel="prefetch" href="/assets/js/80.688d4c3b.js"><link rel="prefetch" href="/assets/js/81.4eaaee90.js"><link rel="prefetch" href="/assets/js/82.53bf5bf4.js"><link rel="prefetch" href="/assets/js/83.53cdee38.js"><link rel="prefetch" href="/assets/js/84.848d09d8.js"><link rel="prefetch" href="/assets/js/85.4ef416fa.js"><link rel="prefetch" href="/assets/js/86.559b9784.js"><link rel="prefetch" href="/assets/js/87.1317f521.js"><link rel="prefetch" href="/assets/js/88.61e1f1fa.js"><link rel="prefetch" href="/assets/js/89.c37979bc.js"><link rel="prefetch" href="/assets/js/9.acdf956e.js"><link rel="prefetch" href="/assets/js/90.329e7956.js"><link rel="prefetch" href="/assets/js/91.e9246182.js"><link rel="prefetch" href="/assets/js/92.41e1ecaf.js"><link rel="prefetch" href="/assets/js/93.6cbe0205.js"><link rel="prefetch" href="/assets/js/94.922231b5.js"><link rel="prefetch" href="/assets/js/95.23cfae7c.js"><link rel="prefetch" href="/assets/js/96.790a39b9.js"><link rel="prefetch" href="/assets/js/98.f016d83e.js"><link rel="prefetch" href="/assets/js/99.b1d81562.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.96cada6e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.27efc831.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/website_icon.png" alt="SAL Repo" class="logo"> <span class="site-name can-hide">SAL Repo</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工作" class="dropdown-title"><a href="/work/" class="link-title">工作</a> <span class="title" style="display:none;">工作</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>编程语言</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/work/C/" class="nav-link">C</a></li><li class="dropdown-subitem"><a href="/work/C++/" class="nav-link">C++</a></li><li class="dropdown-subitem"><a href="/work/Script_Language/" class="nav-link">Script_Language</a></li></ul></li><li class="dropdown-item"><h4>计算机知识</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/work/Linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/work/dataStruct/" class="nav-link">数据机构与算法</a></li><li class="dropdown-subitem"><a href="/work/OS/" class="nav-link">操作系统</a></li><li class="dropdown-subitem"><a href="/work/network/" class="nav-link">计算机网络</a></li></ul></li><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/work/MySQL/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/work/Redis/" class="nav-link">Redis</a></li></ul></li><li class="dropdown-item"><h4>工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/work/Git/" class="nav-link">Git</a></li><li class="dropdown-subitem"><a href="/work/VM/" class="nav-link">虚拟机</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/work/leetcode/" class="nav-link">刷题</a></li><li class="dropdown-subitem"><a href="/work/bg/" class="nav-link">interview</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><a href="/project/" class="link-title">项目</a> <span class="title" style="display:none;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/project/mynetlib/" class="nav-link">mynetlib</a></li><li class="dropdown-item"><!----> <a href="/project/mymprpc/" class="nav-link">mymprpc</a></li><li class="dropdown-item"><!----> <a href="/project/mytinystl/" class="nav-link">mytinystl</a></li><li class="dropdown-item"><!----> <a href="/project/DML/" class="nav-link">DML</a></li><li class="dropdown-item"><!----> <a href="/project/FL/" class="nav-link">FL</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习" class="dropdown-title"><a href="/study/" class="link-title">学习</a> <span class="title" style="display:none;">学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>研究生</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study/publications/" class="nav-link">publications</a></li><li class="dropdown-subitem"><a href="/study/ML/" class="nav-link">机器学习</a></li></ul></li><li class="dropdown-item"><h4>阅读</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study/read/" class="nav-link">个人摘抄</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生活" class="dropdown-title"><a href="/life/" class="link-title">生活</a> <span class="title" style="display:none;">生活</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/71024e/" class="nav-link">生活</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/collection/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>总览</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/collection/favorites/" class="nav-link">个人收藏夹</a></li><li class="dropdown-subitem"><a href="/collection/download/" class="nav-link">资源下载</a></li></ul></li><li class="dropdown-item"><h4>快速链接</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://sci-hub.wf/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  SCI-HUB
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/collection/favorites/#文件转换、解密工具" class="nav-link">文件转换、解密工具</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>索引</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>友链</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/friends/" class="nav-link">友情链接</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <a href="https://github.com/smileatl/smileatlRepository_source" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.jpg"> <div class="blogger-info"><h3>smileatl</h3> <span>smileatl, Songlei Lin</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工作" class="dropdown-title"><a href="/work/" class="link-title">工作</a> <span class="title" style="display:none;">工作</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>编程语言</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/work/C/" class="nav-link">C</a></li><li class="dropdown-subitem"><a href="/work/C++/" class="nav-link">C++</a></li><li class="dropdown-subitem"><a href="/work/Script_Language/" class="nav-link">Script_Language</a></li></ul></li><li class="dropdown-item"><h4>计算机知识</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/work/Linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/work/dataStruct/" class="nav-link">数据机构与算法</a></li><li class="dropdown-subitem"><a href="/work/OS/" class="nav-link">操作系统</a></li><li class="dropdown-subitem"><a href="/work/network/" class="nav-link">计算机网络</a></li></ul></li><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/work/MySQL/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/work/Redis/" class="nav-link">Redis</a></li></ul></li><li class="dropdown-item"><h4>工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/work/Git/" class="nav-link">Git</a></li><li class="dropdown-subitem"><a href="/work/VM/" class="nav-link">虚拟机</a></li></ul></li><li class="dropdown-item"><h4>其他</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/work/leetcode/" class="nav-link">刷题</a></li><li class="dropdown-subitem"><a href="/work/bg/" class="nav-link">interview</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><a href="/project/" class="link-title">项目</a> <span class="title" style="display:none;">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/project/mynetlib/" class="nav-link">mynetlib</a></li><li class="dropdown-item"><!----> <a href="/project/mymprpc/" class="nav-link">mymprpc</a></li><li class="dropdown-item"><!----> <a href="/project/mytinystl/" class="nav-link">mytinystl</a></li><li class="dropdown-item"><!----> <a href="/project/DML/" class="nav-link">DML</a></li><li class="dropdown-item"><!----> <a href="/project/FL/" class="nav-link">FL</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习" class="dropdown-title"><a href="/study/" class="link-title">学习</a> <span class="title" style="display:none;">学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>研究生</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study/publications/" class="nav-link">publications</a></li><li class="dropdown-subitem"><a href="/study/ML/" class="nav-link">机器学习</a></li></ul></li><li class="dropdown-item"><h4>阅读</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study/read/" class="nav-link">个人摘抄</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生活" class="dropdown-title"><a href="/life/" class="link-title">生活</a> <span class="title" style="display:none;">生活</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/71024e/" class="nav-link">生活</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/collection/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>总览</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/collection/favorites/" class="nav-link">个人收藏夹</a></li><li class="dropdown-subitem"><a href="/collection/download/" class="nav-link">资源下载</a></li></ul></li><li class="dropdown-item"><h4>快速链接</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://sci-hub.wf/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  SCI-HUB
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/collection/favorites/#文件转换、解密工具" class="nav-link">文件转换、解密工具</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>索引</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>友链</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/friends/" class="nav-link">友情链接</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <a href="https://github.com/smileatl/smileatlRepository_source" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>编程语言-C</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>编程语言-C++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>编程语言-Script_Language</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机知识-Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机知识-数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>计算机知识-操作系统</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/d277cb/" aria-current="page" class="active sidebar-link">Linux系统函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/d277cb/#linux系统io函数" class="sidebar-link">Linux系统IO函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#c库io函数工作流程" class="sidebar-link">C库IO函数工作流程</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#库函数和系统函数的关系" class="sidebar-link">库函数和系统函数的关系</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#_1-pcb和文件描述符" class="sidebar-link">1.pcb和文件描述符</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#_2-虚拟地址空间" class="sidebar-link">2.虚拟地址空间</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d277cb/#系统io函数-系统调用" class="sidebar-link">系统IO函数/系统调用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#open" class="sidebar-link">open</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#close" class="sidebar-link">close</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#read" class="sidebar-link">read</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#write" class="sidebar-link">write</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#lseek" class="sidebar-link">lseek</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d277cb/#errno" class="sidebar-link">errno</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#perror" class="sidebar-link">perror</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#stderr和errno的区别" class="sidebar-link">stderr和errno的区别</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d277cb/#linux-文件操作相关函数" class="sidebar-link">linux 文件操作相关函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#stat" class="sidebar-link">stat</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#fstat" class="sidebar-link">fstat</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#lseek-2" class="sidebar-link">lseek</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#truncate" class="sidebar-link">truncate</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#ftruncate" class="sidebar-link">ftruncate</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#access" class="sidebar-link">access</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#fgets" class="sidebar-link">fgets</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#fcntl" class="sidebar-link">fcntl</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d277cb/#文件内容操作" class="sidebar-link">文件内容操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#fputs" class="sidebar-link">fputs</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#feof" class="sidebar-link">feof</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d277cb/#linux目录操作相关函数" class="sidebar-link">linux目录操作相关函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#chdir" class="sidebar-link">chdir</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d277cb/#内存及字符串操作" class="sidebar-link">内存及字符串操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#memcpy" class="sidebar-link">memcpy</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#memmove" class="sidebar-link">memmove</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#memset" class="sidebar-link">memset</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#strsep" class="sidebar-link">strsep</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#strcpy" class="sidebar-link">strcpy</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#strcmp" class="sidebar-link">strcmp</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#strtok" class="sidebar-link">strtok</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d277cb/#环境变量" class="sidebar-link">环境变量：</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#getenv" class="sidebar-link">getenv</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d277cb/#内存控制" class="sidebar-link">内存控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#calloc" class="sidebar-link">calloc</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#mmap" class="sidebar-link">mmap</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#munmap" class="sidebar-link">munmap</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d277cb/#终端控制" class="sidebar-link">终端控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#getopt" class="sidebar-link">getopt</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d277cb/#进程控制" class="sidebar-link">进程控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#execvp" class="sidebar-link">execvp</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#eixt" class="sidebar-link">eixt</a></li><li class="sidebar-sub-header level4"><a href="/pages/d277cb/#参数" class="sidebar-link">参数</a></li><li class="sidebar-sub-header level4"><a href="/pages/d277cb/#返回值" class="sidebar-link">返回值</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#fprintf" class="sidebar-link">fprintf</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#wait" class="sidebar-link">wait</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d277cb/#线程控制" class="sidebar-link">线程控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#pthread-create" class="sidebar-link">pthread_create</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#pthread-join" class="sidebar-link">pthread_join</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d277cb/#文件权限控制" class="sidebar-link">文件权限控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#access-2" class="sidebar-link">access</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d277cb/#信号处理" class="sidebar-link">信号处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#mkfifo" class="sidebar-link">mkfifo</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#sigaction" class="sidebar-link">sigaction</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#sigfillset" class="sidebar-link">sigfillset</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#strerror" class="sidebar-link">strerror</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d277cb/#其他" class="sidebar-link">其他</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#assert" class="sidebar-link">assert</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#snprintf" class="sidebar-link">snprintf</a></li><li class="sidebar-sub-header level3"><a href="/pages/d277cb/#usleep" class="sidebar-link">usleep</a></li></ul></li></ul></li><li><a href="/pages/cfe0e1/" class="sidebar-link">Linux网络编程</a></li><li><a href="/pages/de5394/" class="sidebar-link">进程</a></li><li><a href="/pages/c96ed6/" class="sidebar-link">线程</a></li><li><a href="/pages/84e40e/" class="sidebar-link">信号</a></li><li><a href="/pages/f10697/" class="sidebar-link">高并发服务器</a></li><li><a href="/pages/f02db6/" class="sidebar-link">homework</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机知识-计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库-MySQL</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库-Redis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具-Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具-虚拟机</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他-刷题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他-interview</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/work/#工作" data-v-06225672>工作</a></li><li data-v-06225672><a href="/work/#计算机知识-操作系统" data-v-06225672>计算机知识-操作系统</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/smileatl" target="_blank" title="作者" class="beLink" data-v-06225672>smileatl</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-08-11</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">Linux系统函数<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="linux系统io函数"><a href="#linux系统io函数" class="header-anchor">#</a> Linux系统IO函数</h2> <h3 id="c库io函数工作流程"><a href="#c库io函数工作流程" class="header-anchor">#</a> C库IO函数工作流程</h3> <p><img src="/assets/4_C_library_IO_function_workflow.png" alt="4_C库IO函数工作流程"></p> <p>缓存满了再刷到硬盘上，提高效率</p> <ul><li>fflush：不管满没满直接刷到硬盘上</li> <li>满了自动写到硬盘上</li> <li>调用close不管满没满，都会写到硬盘上；
main函数中的return，exit也会把缓冲区的数据写到硬盘上</li></ul> <h3 id="库函数和系统函数的关系"><a href="#库函数和系统函数的关系" class="header-anchor">#</a> 库函数和系统函数的关系</h3> <p>FILE* 返回值</p> <p><img src="/assets/12809865123.png" alt="7_库函数与系统函数的关系"></p> <p>FD：文件描述符</p> <p>FP_POS：文件读写指针位置</p> <p>BUFFER：I/O缓冲区（内存地址），C库函数帮我们维护的一个缓冲区</p> <blockquote><p>write只能对用户空间（0-3G）操作，sys_write能对内核空间（3-4G）操作</p> <p>内核里面维护了一些驱动，就会调用设备驱动，硬盘、键盘、显示器之类</p> <p>这里调用显示器的驱动，让驱动把这个字符串做一个显示，显示器就能在硬件层面上把printf打印的字符创输出到屏幕上</p></blockquote> <p>重点：</p> <ul><li>fopen是C库IO函数，返回的是一个执行文件结构的指针FILE*</li> <li>而write是系统调用，返回的是文件句柄，文件的句柄是文件在文件描述符表里的索引，int类型</li></ul> <h3 id="_1-pcb和文件描述符"><a href="#_1-pcb和文件描述符" class="header-anchor">#</a> 1.pcb和文件描述符</h3> <p>位于内核区</p> <p>1、文件描述符</p> <ul><li>int 类型</li> <li>一个进程最多可打开多少文件</li></ul> <p>2、pcb</p> <ul><li>进程控制块</li> <li>==在其中有一个文件描述符表 ——数组[1024]==</li></ul> <p><img src="/assets/1685179017350.png" alt="1685179017350"></p> <h3 id="_2-虚拟地址空间"><a href="#_2-虚拟地址空间" class="header-anchor">#</a> 2.虚拟地址空间</h3> <p>程序启动起来之后，从硬盘上会有一块虚拟内存给程序分配出来，并不是实际4G，而是用了多少就多少，没有被使用的还放着。</p> <ul><li>3G-4G内核区，不允许用户去操作的</li> <li>0-3G用户区，有用户操作</li> <li>代码段，main函数就从代码段开始执行；静态库每次放的位置都是固定的，绝对地址
已被初始化的全局变量，已初始化不等于0
未被初始化的全局变量，未初始化等于0
堆 —— 分配空间从下往上，new malloc
共享库      动态库加载的位置不定，相对地址
栈 —— 分配空间从上往下
命令行参数
环境变量
内核区</li></ul> <p><img src="/assets/6_virtual_address_space.png" alt="6_虚拟地址空间"></p> <p>0-4k的受保护地址不允许用户区访问</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">file</span> hello.txt <span class="token comment">## 可以查看文件的类型</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>cpu 为什么要使用虚拟地址空间与物理地址空间映射？解决了什么样的问题？</p></blockquote> <p>1.方便编译器和操作系统安排程序的地址分布。
程序可以使用==一系列相邻的虚拟地址来访问物理内存中不相邻的大内存缓冲区==。
2.方便进程之间隔离
不同进程使用的虚拟地址彼此隔离。一个进程中的代码无法更改正在由另一进程使用的物理内存。	
3.方便OS使用你那可怜的内存。
程序可以使用一系列虚拟地址来访问大于可用物理内存的内存缓冲区。当物理内存的供应量变小时，
内存管理器会将物理内存页（通常大小为 4 KB）保存到磁盘文件。数据或代码页会根据需要在物理内存与磁盘之间移动。</p> <p>4、读大文件 —— 写入另一个文件</p> <p>两种方式：</p> <p>read write —— 每次读1个byte</p> <p>getc putc —— 每次读1个byte —— ==效率高==</p> <ul><li>标准c库函数，内部有一个缓冲区</li></ul> <h2 id="系统io函数-系统调用"><a href="#系统io函数-系统调用" class="header-anchor">#</a> 系统IO函数/系统调用</h2> <p>系统调用函数都必须考虑返回值</p> <h3 id="open"><a href="#open" class="header-anchor">#</a> open</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code>函数原型：
<span class="token keyword">int</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pathname<span class="token punctuation">,</span> <span class="token keyword">int</span> flags<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pathname<span class="token punctuation">,</span> <span class="token keyword">int</span> flags<span class="token punctuation">,</span> <span class="token class-name">mode_t</span> mode<span class="token punctuation">)</span><span class="token punctuation">;</span>
	pathname：文件的相对或绝对路径
	flags：打开方式
		必选项
			O_RDONLY 只读打开
			O_WRONLY 只写打开
			O_RDWR 可读可写打开
			互斥
		可选项
			O_APPEND 表示追加。
				如果文件已有内容，这次打开文件所写的数据附加到文件的末尾而不覆盖原来的内容。
			O_CREAT 若此文件不存在则创建它。
				使用此选项时需要提供第三个参数mode，表示该文件的访问权限。
				文件权限由open的mode参数和当前进程的umask掩码共同决定
					<span class="token number">0777</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token operator">~</span><span class="token number">0002</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0775</span>
                     <span class="token number">111111111</span>
                     <span class="token number">111111101</span>
                         <span class="token operator">&amp;</span>
                     <span class="token number">111111101</span>
			O_EXCL 如果同时指定了O_CREAT，并且文件已存在，则出错返回。
			O_TRUNC 如果文件已存在，则将其长度截断（Truncate）为<span class="token number">0</span>字节。
			O_NONBLOCK 设置文件为非阻塞状态
常见错误
	<span class="token number">1.</span> 打开文件不存在 
	<span class="token number">2.</span> 以写方式打开只读文件<span class="token punctuation">(</span>打开文件没有对应权限<span class="token punctuation">)</span>
	<span class="token number">3.</span> 以只写方式打开目录
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="close"><a href="#close" class="header-anchor">#</a> close</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code>参数：open函数的返回值
返回值
	<span class="token number">0</span> <span class="token operator">--</span><span class="token operator">&gt;</span> 正常关闭
	<span class="token operator">-</span><span class="token number">1</span> <span class="token operator">--</span><span class="token operator">&gt;</span> 关闭出现错误
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="read"><a href="#read" class="header-anchor">#</a> read</h3> <div class="language-C line-numbers-mode"><pre class="language-c"><code>从打开的设备或文件中读取数据。
返回值
	<span class="token operator">-</span><span class="token number">1</span> <span class="token operator">--</span><span class="token operator">&gt;</span> 错误
	<span class="token operator">&gt;</span><span class="token number">0</span> <span class="token operator">--</span><span class="token operator">&gt;</span> 读出的字节数
	<span class="token operator">=</span><span class="token number">0</span> <span class="token operator">--</span><span class="token operator">&gt;</span> 文件读取完毕
函数原型：<span class="token class-name">ssize_t</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">int</span> fd<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>buf<span class="token punctuation">,</span> <span class="token class-name">size_t</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>  
	fd：文件描述符
	buf：数据缓冲区
	count：请求读取的字节数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="write"><a href="#write" class="header-anchor">#</a> write</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>向打开的设备或文件中写数据。
ssize_t write(int fd, const void *buf, size_t count);
	fd：文件描述符
	buf：需要输出的缓冲区
	count：最大输出字节数
返回值
	-1 --&gt; 失败
	&gt;=0 --&gt; 写入文件的字节数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="lseek"><a href="#lseek" class="header-anchor">#</a> lseek</h3> <p>1、获取文件大小</p> <p>2、移动文件指针</p> <p>3、文件拓展</p> <div class="language-C line-numbers-mode"><pre class="language-c"><code>函数作用
	 修改文件偏移量<span class="token punctuation">(</span>读写位置<span class="token punctuation">)</span>
原型
	<span class="token class-name">off_t</span> <span class="token function">lseek</span><span class="token punctuation">(</span><span class="token keyword">int</span> fd<span class="token punctuation">,</span> <span class="token class-name">off_t</span> offset<span class="token punctuation">,</span> <span class="token keyword">int</span> whence<span class="token punctuation">)</span>
		<span class="token keyword">int</span> fd <span class="token operator">--</span><span class="token operator">&gt;</span> 文件描述符
		<span class="token class-name">off_t</span> offset <span class="token operator">--</span><span class="token operator">&gt;</span> 偏移量
		<span class="token keyword">int</span> whence <span class="token operator">--</span><span class="token operator">&gt;</span> 偏移位置
			<span class="token constant">SEEK_SET</span> <span class="token operator">-</span> 从文件头向后偏移
			<span class="token constant">SEEK_CUR</span> <span class="token operator">-</span> 从当前位置向后偏移
			<span class="token constant">SEEK_END</span> <span class="token operator">-</span> 从文件尾部向后偏移
返回值
	较文件起始位置向后的偏移量
	允许超过文件结尾设置偏移量，文件会因此被拓展。
	失败返回 <span class="token operator">-</span><span class="token number">1</span>
应用
	拓展文件空间
	获取文件长度
		<span class="token function">lseek</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">SEEK_END</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
			返回值即为文件长度
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="errno"><a href="#errno" class="header-anchor">#</a> errno</h2> <p>定义在头文件 errno.h 中</p> <ul><li>​	全局变量</li> <li>​	任何标准C库函数都能对其进行修改（Linux系统函数更可以）</li> <li>在linux C发生异常时，系统自动复制的全局变量</li></ul> <p>错误宏定义位置</p> <ul><li>​	第 1 - 34 个错误定义：
/usr/include/asm-generic/errno-base.h</li> <li>​	第 35 - 133 个错误定义：
/usr/include/asm-generic/errno.h</li></ul> <p>是记录系统的最后一次错误代码。代码是一个int型的值</p> <ul><li><p>每个errno值对应着以字符串表示的错误类型</p></li> <li><p>当调用&quot;某些&quot;函数出错时，该函数会重新设置 errno 的值</p></li></ul> <h3 id="perror"><a href="#perror" class="header-anchor">#</a> perror</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code>头文件
	stdio<span class="token punctuation">.</span>h
函数定义
	<span class="token keyword">void</span> <span class="token function">perror</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">)</span>
函数说明
	用来将上一个函数发生错误的原因输出到标准设备<span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">)</span>
	参数 s 所指的字符串会先打印出<span class="token punctuation">,</span>后面再加上错误原因字符串
	此错误原因依照全局变量errno 的值来决定要输出的字符串。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="stderr和errno的区别"><a href="#stderr和errno的区别" class="header-anchor">#</a> stderr和errno的区别</h3> <ol><li><p>errno表示错误代码。 记录系统的最后一次错误代码。代码是一个int型的值，在errno.h中定义。系统每一次出错都会对应一个出错代码，例如12表示“Cannot allocate memory&quot;。
==errno是由系统调用或线程库等函数产生的错误信息。==</p></li> <li><p>stderr是linux(unix)标准出错输出。linux中的一个进程启动时，都会打开三个文件：标准输入、标准输出和标准出错处理。通常这三个文件都与终端联系。这三个文件分别对应文件描述符0、1、2。系队统自定义了三个文件指针stdin、stdout、stderr，分别指向标准输入、标准输出和标准出错输出。通常结合fprintf使用：fprintf(stderr,&quot;error message&quot;)。
==stderror是操作系统或标准库产生的错误信息==</p></li></ol> <h2 id="linux-文件操作相关函数"><a href="#linux-文件操作相关函数" class="header-anchor">#</a> linux 文件操作相关函数</h2> <h3 id="stat"><a href="#stat" class="header-anchor">#</a> stat</h3> <p>获取文件属性（从inode上获取）</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">stat</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>pathname<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">stat</span> <span class="token operator">*</span>statbuf<span class="token punctuation">)</span><span class="token punctuation">;</span>

返回值
	成功：<span class="token number">0</span>
	失败：<span class="token operator">-</span><span class="token number">1</span>
文件属性  stat结构体
	<span class="token keyword">struct</span> <span class="token class-name">stat</span> <span class="token punctuation">{</span>
    <span class="token class-name">dev_t</span>         st_dev<span class="token punctuation">;</span>       <span class="token comment">//文件的设备编号</span>
    <span class="token class-name">ino_t</span>         st_ino<span class="token punctuation">;</span>       <span class="token comment">//节点</span>
    <span class="token class-name">mode_t</span>        st_mode<span class="token punctuation">;</span>      <span class="token comment">//文件的类型和存取的权限</span>
    <span class="token class-name">nlink_t</span>       st_nlink<span class="token punctuation">;</span>     <span class="token comment">//连到该文件的硬连接数目，刚建立的文件值为1</span>
    <span class="token class-name">uid_t</span>         st_uid<span class="token punctuation">;</span>       <span class="token comment">//用户ID</span>
    <span class="token class-name">gid_t</span>         st_gid<span class="token punctuation">;</span>       <span class="token comment">//组ID</span>
    <span class="token class-name">dev_t</span>         st_rdev<span class="token punctuation">;</span>      <span class="token comment">//(设备类型)若此文件为设备文件，则为其设备编号</span>
    <span class="token class-name">off_t</span>         st_size<span class="token punctuation">;</span>      <span class="token comment">//文件字节数(文件大小)</span>
    <span class="token class-name">blksize_t</span>     st_blksize<span class="token punctuation">;</span>   <span class="token comment">//块大小(文件系统的I/O 缓冲区大小)</span>
    <span class="token class-name">blkcnt_t</span>      st_blocks<span class="token punctuation">;</span>    <span class="token comment">//块数</span>
    <span class="token class-name">time_t</span>        st_atime<span class="token punctuation">;</span>     <span class="token comment">//最后一次访问时间</span>
    <span class="token class-name">time_t</span>        st_mtime<span class="token punctuation">;</span>     <span class="token comment">//最后一次修改时间</span>
    <span class="token class-name">time_t</span>        st_ctime<span class="token punctuation">;</span>     <span class="token comment">//最后一次改变时间(指属性)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
特性
	能够穿透（跟踪）符号链接
		vi 编译器
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>stat函数</p> <p>​	穿透（追踪）函数 —— 软链接</p> <p>lstat函数</p> <p>​	不穿透（追踪）</p> <h3 id="fstat"><a href="#fstat" class="header-anchor">#</a> fstat</h3> <p>头文件：</p> <div class="language-C line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sys/stat.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>函数声明：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">fstat</span><span class="token punctuation">(</span><span class="token keyword">int</span> fd<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">stat</span> <span class="token operator">*</span>statbuf<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>描述：</p> <p>fstat() 用来将参数fd所指向的文件状态复制到参数buf 所指向的结构中(struct stat), fstat() 与stat() 作用完全相同，不同之处在于传入的参数为已打开的文件描述符。</p> <p>返回值：</p> <p>执行成功返回0，失败返回-1，错误代码保存在errno中。</p> <p>fstat()与stat()相同，只是要检索的文件的信息由文件名指定。
要检索的信息是由文件描述符fd指定的。</p> <h3 id="lseek-2"><a href="#lseek-2" class="header-anchor">#</a> lseek</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;sys/types.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;unistd.h&gt;</span></span>
<span class="token class-name">off_t</span> <span class="token function">lseek</span><span class="token punctuation">(</span><span class="token keyword">int</span> fildes<span class="token punctuation">,</span><span class="token class-name">off_t</span> offset <span class="token punctuation">,</span><span class="token keyword">int</span> whence<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>描述：</p> <p>每一个已打开的文件都有一个读写位置, 当打开文件时通常其读写位置是指向文件开头, 若是以附加的方式打开文件(如O_APPEND), 则读写位置会指向文件尾。当read()或write()时, 读写位置会随之增加, <strong>lseek()便是用来控制该文件的读写位置</strong>。参数<strong>fildes</strong> 为已打开的文件描述词, 参数<strong>offset</strong> 为根据参数<strong>whence</strong>来移动读写位置的位移数。</p> <p>参数：</p> <div class="language-C line-numbers-mode"><pre class="language-c"><code>whence为下列其中一种<span class="token operator">:</span>
<span class="token constant">SEEK_SET</span> 参数offset即为新的读写位置。
<span class="token constant">SEEK_CUR</span> 以目前的读写位置往后增加offset个位移量。
<span class="token constant">SEEK_END</span> 将读写位置指向文件尾后再增加offset个位移量。
当whence 值为<span class="token constant">SEEK_CUR</span> 或<span class="token constant">SEEK_END</span>时<span class="token punctuation">,</span> 参数offet允许负值的出现。
下列是教特别的使用方式<span class="token operator">:</span>
<span class="token number">1</span><span class="token punctuation">)</span> 欲将读写位置移到文件开头时<span class="token operator">:</span><span class="token function">lseek</span><span class="token punctuation">(</span><span class="token keyword">int</span> fildes<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token constant">SEEK_SET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">2</span><span class="token punctuation">)</span> 欲将读写位置移到文件尾时<span class="token operator">:</span><span class="token function">lseek</span><span class="token punctuation">(</span><span class="token keyword">int</span> fildes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token constant">SEEK_END</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">3</span><span class="token punctuation">)</span> 想要取得目前文件位置时<span class="token operator">:</span><span class="token function">lseek</span><span class="token punctuation">(</span><span class="token keyword">int</span> fildes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token constant">SEEK_CUR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>返回值：</p> <p>当调用成功时则返回目前的读写位置, 也就是距离文件开头多少个字节。若有错误则返回-1, errno 会存放错误代码。</p> <h3 id="truncate"><a href="#truncate" class="header-anchor">#</a> truncate</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">truncate</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>path<span class="token punctuation">,</span> <span class="token class-name">off_t</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>描述：</p> <p>指定文件路径截断/扩展到指定的长度</p> <h3 id="ftruncate"><a href="#ftruncate" class="header-anchor">#</a> ftruncate</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">ftruncate</span><span class="token punctuation">(</span><span class="token keyword">int</span> fd<span class="token punctuation">,</span> <span class="token class-name">off_t</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>描述：</p> <p>将一个文件描述符fd指向的文件截断/扩展到指定的长度</p> <h3 id="access"><a href="#access" class="header-anchor">#</a> access</h3> <p>测试指定文件是否拥有某种权限</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>int access(const char *pathname, int mode);
	参数
		pathname --&gt; 文件名
		mode --&gt; 权限类别
			R_OK 是否有读权限
			W_OK 是否有写权限
			X_OK 是否有执行权限
			F_OK 测试一个文件是否存在
	返回值
		0 --&gt; 所有欲查核的权限都通过了检查
		-1 --&gt; 有权限被禁止
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="fgets"><a href="#fgets" class="header-anchor">#</a> fgets</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">char</span> <span class="token operator">*</span> <span class="token function">fgets</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span> s<span class="token punctuation">,</span><span class="token keyword">int</span> size<span class="token punctuation">,</span>FILE <span class="token operator">*</span> stream<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>描述：</p> <p>fgets()用来从参数<strong>stream</strong>所指的文件内读入字符并存到参数<strong>s</strong>所指的内存空间, 直到出现换行字符、读到文件尾或是已读了<strong>size-1</strong>个字符为止, 最后会加上NULL作为字符串结束。</p> <p>返回值：</p> <p>gets()若成功则返回s指针, 返回NULL则表示有错误发生。</p> <p>其他：</p> <p>C中空格是‘ ’，ASCII码为0x20</p> <p>空字符是‘\0’，NULL，ASCII码为0x00</p> <h3 id="fcntl"><a href="#fcntl" class="header-anchor">#</a> fcntl</h3> <p>改变已经打开的文件的属性</p> <p>​	打开文件的时候：只读</p> <p>​	修改文件的时候：添加追加O_APPEND</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>根据文件描述符来操作文件的状态 <span class="token operator">--</span> #include <span class="token operator">&lt;</span>fcntl<span class="token punctuation">.</span>h<span class="token operator">&gt;</span>

函数原型
	<span class="token keyword">int</span> fcntl（<span class="token keyword">int</span> fd<span class="token punctuation">,</span> <span class="token keyword">int</span> cmd）；
	<span class="token keyword">int</span> fcntl（<span class="token keyword">int</span> fd<span class="token punctuation">,</span> <span class="token keyword">int</span> cmd<span class="token punctuation">,</span> <span class="token keyword">long</span> arg）；
	<span class="token keyword">int</span> fcntl（<span class="token keyword">int</span> fd<span class="token punctuation">,</span> <span class="token keyword">int</span> cmd<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">flock</span> <span class="token operator">*</span>lock）；
	
功能
	复制一个现有的描述符 <span class="token operator">--</span> cmd
		F_DUPFD
	
	获得／设置文件描述符标记 <span class="token operator">--</span> cmd
		F_GETFD
		F_SETFD
	
	获得／设置文件状态标记 <span class="token operator">--</span> cmd
		F_GETFL
			只读打开
				O_RDONLY
			只写打开
				O_WRONLY
			读写打开
				O_RDWR
			执行打开
				O_EXEC
			搜索打开目录
				O_SEARCH
			追加写
				O_APPEND
			非阻塞模式
				O_NONBLOCK
		F_SETFL
			可更改的几个标识
				O_APPEND
				O_NONBLOCK
	
	获得／设置异步I<span class="token operator">/</span>O所有权 <span class="token operator">--</span> cmd
		F_GETOWN
		F_SETOWN
	
	获得／设置记录锁 <span class="token operator">--</span> cmd
		F_GETLK
		F_SETLK
		F_SETLKW
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;unistd.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;fcntl.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">fcntl</span><span class="token punctuation">(</span><span class="token keyword">int</span> fd <span class="token punctuation">,</span> <span class="token keyword">int</span> cmd<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">fcntl</span><span class="token punctuation">(</span><span class="token keyword">int</span> fd<span class="token punctuation">,</span><span class="token keyword">int</span> cmd<span class="token punctuation">,</span><span class="token keyword">long</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">fcntl</span><span class="token punctuation">(</span><span class="token keyword">int</span> fd<span class="token punctuation">,</span><span class="token keyword">int</span> cmd<span class="token punctuation">,</span><span class="token keyword">struct</span> <span class="token class-name">flock</span> <span class="token operator">*</span> lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="文件内容操作"><a href="#文件内容操作" class="header-anchor">#</a> 文件内容操作</h2> <h3 id="fputs"><a href="#fputs" class="header-anchor">#</a> fputs</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">fputs</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> s<span class="token punctuation">,</span>FILE <span class="token operator">*</span> stream<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>描述：</p> <p>fputs()用来将参数<strong>s</strong>所指的字符串写入到参数<strong>stream</strong>所指的文件内。</p> <p>返回值：</p> <p>若成功则返回写出的字符个数, 返回EOF则表示有错误发生。</p> <h3 id="feof"><a href="#feof" class="header-anchor">#</a> feof</h3> <p>定义：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">feof</span><span class="token punctuation">(</span>FILE <span class="token operator">*</span> stream<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>说明：</p> <p>feof()用来侦测是否读取到了文件尾, 尾数stream为fopen()所返回之文件指针。如果已到文件尾则返回非零值, 其他情况返回0。</p> <p>返回值：</p> <p>返回非零值代表已到达文件尾。</p> <p>相关函数：</p> <p>fopen, fgetc, fgets, fread</p> <h2 id="linux目录操作相关函数"><a href="#linux目录操作相关函数" class="header-anchor">#</a> linux目录操作相关函数</h2> <h3 id="chdir"><a href="#chdir" class="header-anchor">#</a> chdir</h3> <p>修改的是当前进程的路径</p> <h2 id="内存及字符串操作"><a href="#内存及字符串操作" class="header-anchor">#</a> 内存及字符串操作</h2> <h3 id="memcpy"><a href="#memcpy" class="header-anchor">#</a> memcpy</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">memcpy</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>dest<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span>src<span class="token punctuation">,</span> <span class="token class-name">size_t</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">strcmp</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>s1<span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>描述：</p> <p>memcpy()用来拷贝src所指的内存内容前n个字节到dest所指的内存地址上。与strcpy()不同的是, memcpy()会完整的复制n个字节, 不会因为遇到字符串结束'\0'而结束。</p> <p>返回值：</p> <p>返回指向dest的指针</p> <h3 id="memmove"><a href="#memmove" class="header-anchor">#</a> memmove</h3> <p>定义：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token keyword">void</span> <span class="token operator">*</span> <span class="token function">memmove</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>dest<span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span>src<span class="token punctuation">,</span><span class="token class-name">size_t</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>说明：</p> <p>memmove()与memcpy()一样都是用来拷贝src所指的内存内容前n个字节到dest所指的地址上。不同的是, 当src和dest所指的内存区域重叠时, memmove()仍然可以正确的处理, 不过执行效率上会比使用memcpy()略慢些。</p> <p>返回值：</p> <p>返回指向dest的指针。</p> <p>相关函数：</p> <p>bcopy, memccpy, memcpy, strcpy, strncpy</p> <p>附加说明：</p> <p>指针src和dest所指的内存区域可以重叠。</p> <h3 id="memset"><a href="#memset" class="header-anchor">#</a> memset</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token keyword">void</span> <span class="token operator">*</span> <span class="token function">memset</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>s <span class="token punctuation">,</span><span class="token keyword">int</span> c<span class="token punctuation">,</span> <span class="token class-name">size_t</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>描述：</p> <p>memset()会将参数s所指的内存区域前n个字节以参数c填入, 然后返回指向s的指针。在编写程序时, 若需要将某一数组作初始化, memset()会相当方便。</p> <p>返回值：</p> <p>返回指向s的指针</p> <h3 id="strsep"><a href="#strsep" class="header-anchor">#</a> strsep</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">strsep</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>stringp<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>delim<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>参数：</p> <p>stringp：指向字符串的指针的指针， 要被分割的字符串地址，
elim：指向字符的指针 ，分割符</p> <p>描述：</p> <p>函数返回分割后的第一个字符串。函数执行的过程，是在 *stringp 中查找分割符，并将其替换为“\0”，返回分割出的第一个字符串指针 （NULL 表示到达字符串尾），并更新 *stringp 指向下一个字符串。</p> <h3 id="strcpy"><a href="#strcpy" class="header-anchor">#</a> strcpy</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">strcpy</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>dest<span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>描述：</p> <p>strcpy()会将参数<strong>src</strong>字符串拷贝至参数<strong>dest</strong>所指的地址。</p> <p>返回值：</p> <p>返回参数dest的字符串起始地址。</p> <h3 id="strcmp"><a href="#strcmp" class="header-anchor">#</a> strcmp</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">strcmp</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>s1<span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>描述：</p> <p>strcmp()用来比较参数<strong>s1</strong>和<strong>s2</strong>字符串。字符串大小的比较是以ASCII 码表上的顺序来决定, 此顺序亦为字符的值。strcmp()首先将s1第一个字符值减去s2第一个字符值, 若差值为0则再继续比较下个字符, 若差值不为0则将差值返回。例如字符串&quot;Ac&quot;和&quot;ba&quot;比较则会返回字符&quot;A&quot;(65)和'b'(98)的差值(－33)。</p> <p>返回值：</p> <p>若参数s1和s2字符串相同则返回0。s1若大于s2则返回大于0的值。s1若小于s2则返回小于0 的值。</p> <h3 id="strtok"><a href="#strtok" class="header-anchor">#</a> strtok</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token keyword">char</span> <span class="token operator">*</span> <span class="token function">strtok</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>delim<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>描述：</p> <p>strtok()用来将字符串分割成一个个片段。参数<strong>s</strong>指向欲分割的字符串, 参数<strong>delim</strong>则为分割字符串, 当strtok()在参数s的字符串中发现到参数delim的分割字符时则会将该字符改为\0 字符。在第一次调用时, strtok()必需给予参数s字符串, 往后的调用则将参数s设置成NULL。每次调用成功则返回下一个分割后的字符串指针</p> <p>返回值：</p> <p>返回下一个分割后的字符串指针, 如果已无从分割则返回NULL。</p> <h2 id="环境变量"><a href="#环境变量" class="header-anchor">#</a> 环境变量：</h2> <h3 id="getenv"><a href="#getenv" class="header-anchor">#</a> getenv</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>

<span class="token keyword">char</span> <span class="token operator">*</span> <span class="token function">getenv</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>说明：</p> <p>getenv()用来取得参数name环境变量的内容。参数name为环境变量的名称, 如果该变量存在则会返回指向该内容的指针。环境变量的格式为name＝value。</p> <p>返回值：</p> <p>执行成功则返回指向该内容的指针, 找不到符合的环境变量名称则返回NULL。</p> <p>示例：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token function">mian</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">char</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token function">getenv</span><span class="token punctuation">(</span><span class="token string">&quot;USER&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;USER=%s\n&quot;</span><span class="token punctuation">,</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>执行：</p> <p>USER = root</p> <h2 id="内存控制"><a href="#内存控制" class="header-anchor">#</a> 内存控制</h2> <h3 id="calloc"><a href="#calloc" class="header-anchor">#</a> calloc</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">calloc</span><span class="token punctuation">(</span><span class="token class-name">size_t</span> nmemb<span class="token punctuation">,</span> <span class="token class-name">size_t</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>描述：</p> <p>calloc()用来配置<strong>nmemb</strong>个相邻的内存单位, 每一单位的大小为<strong>size</strong>, 并返回指向第一个元素的指针。这和使用下列的方式效果相同:malloc(nmemb*size);不过, 在利用calloc(<strong>)配置内存时会将内存内容初始化为0</strong>。</p> <p>返回值：</p> <p>若配置成功则返回一指针, 失败则返回NULL。</p> <h3 id="mmap"><a href="#mmap" class="header-anchor">#</a> mmap</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">mmap</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>addr<span class="token punctuation">,</span> <span class="token class-name">size_t</span> length<span class="token punctuation">,</span> <span class="token keyword">int</span> prot<span class="token punctuation">,</span> <span class="token keyword">int</span> flags<span class="token punctuation">,</span>
                  <span class="token keyword">int</span> fd<span class="token punctuation">,</span> <span class="token class-name">off_t</span> offset<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>描述：</p> <p>​		创建映射区，使一个磁盘文件与存储空间中的一个缓冲区相映射</p> <p>参数：</p> <p>​         addr:       建立映射区的首地址，由Linux内核指定。使用时，直接传递NULL</p> <p>​         length： 欲创建映射区的大小</p> <p>​         prot：      映射区权限PROT_READ、PROT_WRITE、PROT_READ|PROT_WRITE</p> <p>​         flags：     标志位参数(常用于设定更新物理区域、设置共享、创建匿名映射区)</p> <p>​                        MAP_SHARED:  会将映射区所做的操作反映到物理设备（磁盘）上。</p> <p>​                        MAP_PRIVATE: 映射区所做的修改不会反映到物理设备。</p> <p>​         fd：         用来建立映射区的文件描述符</p> <p>​         offset：  映射文件的偏移(4k的整数倍)</p> <p>返回：</p> <ul><li>成功：返回创建的映射区首地址；</li> <li><strong>失败：</strong> <strong>MAP_FAILED宏</strong></li></ul> <p>其他：</p> <p>同malloc函数申请内存空间类似的，mmap建立的映射区在使用结束后也应调用类似free的函数来释放。</p> <h3 id="munmap"><a href="#munmap" class="header-anchor">#</a> munmap</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">munmap</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>start<span class="token punctuation">,</span> <span class="token class-name">size_t</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>  成功：<span class="token number">0</span>； 失败：<span class="token operator">-</span><span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>描述：</p> <ul><li>munmap()用来取消参数<strong>start</strong>所指的映射内存起始地址, 参数l<strong>ength</strong>则是欲取消的内存大小。当进程结束或利用exec相关函数来执行其他程序时, 映射内存会自动解除, 但关闭对应的文件描述词时不会解除映射。</li></ul> <p>返回值：</p> <ul><li>如果解除映射成功则返回0, 否则返回－1, 错误原因存于errno中错误代码EINVAL</li></ul> <h2 id="终端控制"><a href="#终端控制" class="header-anchor">#</a> 终端控制</h2> <h3 id="getopt"><a href="#getopt" class="header-anchor">#</a> getopt</h3> <p>定义：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;unistd.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">getopt</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span> <span class="token keyword">const</span> argv<span class="token punctuation">[</span> <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> optstring<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>说明：</p> <p>getopt()用来分析命令行参数。参数argc和argv是由main()传递的参数个数和内容。参数optstring 则代表欲处理的选项字符串。此函数会返回在argv 中下一个的选项字母, 此字母会对应参数optstring 中的字母。如果选项字符串里的字母后接着冒号&quot;:&quot;, 则表示还有相关的参数, 全域变量optarg 即会指向此额外参数。如果getopt()找不到符合的参数则会印出错信息, 并将全域变量optopt设为&quot;?&quot;字符, 如果不希望getopt()印出错信息, 则只要将全域变量opterr设为0即可。</p> <p>返回值：</p> <p>如果找到符合的参数则返回此参数字母, 如果参数不包含在参数optstring 的选项字母则返回&quot;?&quot;字符, 分析结束则返回-1。</p> <p>示例：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;unistd.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> ch<span class="token punctuation">;</span>
	opterr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ch <span class="token operator">=</span> <span class="token function">getopt</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span>argv<span class="token punctuation">,</span><span class="token string">&quot;a:bcde&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token keyword">switch</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">case</span> <span class="token char">'a'</span><span class="token operator">:</span>
			<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;option a:'%s'\n&quot;</span><span class="token punctuation">,</span>optarg<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token char">'b'</span><span class="token operator">:</span>
			<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;option b :b\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">default</span><span class="token operator">:</span>
			<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;other option :%c\n&quot;</span><span class="token punctuation">,</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;optopt +%c\n&quot;</span><span class="token punctuation">,</span>optopt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

		
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>执行：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$./getopt –b
option b:b
$./getopt –c
other option:c
$./getopt –a
other option :?
$./getopt –a12345
option a:<span class="token string">'12345'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="进程控制"><a href="#进程控制" class="header-anchor">#</a> 进程控制</h2> <h3 id="execvp"><a href="#execvp" class="header-anchor">#</a> execvp</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;unistd.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">execvp</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>file <span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">*</span> <span class="token keyword">const</span> argv <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>描述：</p> <p>execvp()会从PATH 环境变量所指的目录中查找符合参数<strong>file</strong> 的文件名, 找到后便执行该文件, 然后将第二个参数<strong>argv</strong>传给该欲执行的文件。</p> <p>返回值：</p> <p>如果执行成功则函数不会返回, 执行失败则直接返回-1, 失败原因存于errno中。</p> <h3 id="eixt"><a href="#eixt" class="header-anchor">#</a> eixt</h3> <p>C 库函数 <strong>void exit(int status)</strong> 立即终止调用进程。任何属于该进程的打开的文件描述符都会被关闭，该进程的子进程由进程 1 继承 ==init(1)==，初始化，且会向父进程发送一个 SIGCHLD 信号。</p> <p>声明</p> <p>下面是 exit() 函数的声明。</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token function">exit</span><span class="token punctuation">(</span><span class="token keyword">int</span> status<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="参数"><a href="#参数" class="header-anchor">#</a> 参数</h4> <ul><li><strong>status</strong> -- 返回给父进程的状态值。</li></ul> <h4 id="返回值"><a href="#返回值" class="header-anchor">#</a> 返回值</h4> <p>该函数不返回值。</p> <h3 id="fprintf"><a href="#fprintf" class="header-anchor">#</a> fprintf</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">fprintf</span><span class="token punctuation">(</span>FILE <span class="token operator">*</span> stream<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> format<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>描述：</p> <p>fprintf()会根据参数<strong>format</strong>字符串来转换并格式化数据, 然后将结果输出到参数<strong>stream</strong>指定的文件中, 直到出现字符串结束('\0')为止。</p> <p>返回值：</p> <p>关于参数format字符串的格式请参考printf()。成功则返回实际输出的字符数, 失败则返回-1, 错误原因存于errno中。</p> <h3 id="wait"><a href="#wait" class="header-anchor">#</a> wait</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sys/types.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sys/wait.h&gt;</span></span>
<span class="token class-name">pid_t</span> <span class="token function">wait</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>描述：</p> <ul><li>wait()会暂时停止目前进程的执行, 直到有信号来到或子进程结束。</li> <li>如果在调用wait()时子进程已经结束, 则wait()会立即返回子进程结束状态值。子进程的结束状态值会由参数status 返回, 而子进程的进程识别码也会一快返回。</li> <li>如果不在意结束状态值, 则参数status可以设成NULL。子进程的结束状态值请参考waitpid()。</li></ul> <p>返回值：</p> <ul><li>如果执行成功则返回子进程识别码(PID), 如果有错误发生则返回-1。失败原因存于errno中。</li></ul> <h2 id="线程控制"><a href="#线程控制" class="header-anchor">#</a> 线程控制</h2> <h3 id="pthread-create"><a href="#pthread-create" class="header-anchor">#</a> pthread_create</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;pthread.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token class-name">pthread_t</span> <span class="token operator">*</span>thread<span class="token punctuation">,</span>
                   <span class="token keyword">const</span> <span class="token class-name">pthread_attr_t</span> <span class="token operator">*</span>attr<span class="token punctuation">,</span>
                   <span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span>start_routine<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                   <span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>描述：</p> <p>创建线程</p> <p>参数：</p> <ul><li>pthread_t *thread：传递一个 pthread_t 类型的指针变量，也可以直接传递某个 pthread_t 类型变量的地址。pthread_t 是一种用于表示线程的数据类型，每一个 pthread_t 类型的变量都可以表示一个线程。</li> <li>const pthread_attr_t *attr：用于手动设置新建线程的属性，例如线程的调用策略、线程所能使用的栈内存的大小等。大部分场景中，我们都不需要手动修改线程的属性，将 attr 参数赋值为 NULL，pthread_create() 函数会采用系统默认的属性值创建线程。</li> <li>void *(*start_routine) (void *)：以函数指针的方式指明新建线程需要执行的函数，该函数的参数最多有 1 个（可以省略不写），==形参和返回值的类型都必须为 void* 类型==。==void* 类型又称空指针类型==，表明指针所指数据的类型是未知的。==使用此类型指针时，我们通常需要先对其进行强制类型转换，然后才能正常访问指针指向的数据。==</li> <li>void *arg：指定传递给 start_routine 函数的实参，当不需要传递任何数据时，将 arg 赋值为 NULL 即可。</li></ul> <p>返回值：</p> <p>如果成功创建线程，pthread_create() 函数返回数字 0，反之返回非零值。各个非零值都对应着不同的宏，指明创建失败的原因，常见的宏有以下几种：</p> <ul><li><p>EAGAIN：系统资源不足，无法提供创建线程所需的资源。</p></li> <li><p>EINVAL：传递给 pthread_create() 函数的 attr 参数无效。</p></li> <li><p>EPERM：传递给 pthread_create() 函数的 attr 参数中，某些属性的设置为非法操作，程序没有相关的设置权限。</p></li> <li><blockquote><p>上这些宏都声明在 &lt;errno.h&gt; 头文件中，如果程序中想使用这些宏，需提前引入此头文件。</p></blockquote></li></ul> <h3 id="pthread-join"><a href="#pthread-join" class="header-anchor">#</a> pthread_join</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">pthread_join</span><span class="token punctuation">(</span><span class="token class-name">pthread_t</span> thread<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span><span class="token operator">*</span> retval<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>描述：</p> <p>阻塞等待线程退出，获取线程退出状态</p> <p><strong>thread</strong> 参数用于指定接收哪个线程的返回值；<strong>retval</strong> 参数表示接收到的返回值，如果 thread 线程没有返回值，又或者我们不需要接收 thread 线程的返回值，可以将 retval 参数置为 NULL。</p> <h2 id="文件权限控制"><a href="#文件权限控制" class="header-anchor">#</a> 文件权限控制</h2> <h3 id="access-2"><a href="#access-2" class="header-anchor">#</a> access</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;unistd.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">access</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> pathname<span class="token punctuation">,</span><span class="token keyword">int</span> mode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>描述：</p> <ul><li>access()会检查是否可以读/写某一已存在的文件。</li> <li>参数<strong>mode</strong>有几种情况组合, R_OK, W_OK, X_OK 和F_OK。</li> <li>R_OK, W_OK与X_OK用来检查文件是否具有读取、写入和执行的权限。</li> <li>F_OK则是用来判断该文件是否存在。</li> <li>由于access()只作权限的核查, 并不理会文件形态或文件内容, 因此, 如果一目录表示为&quot;可写入&quot;, 表示可以在该目录中建立新文件等操作, 而非意味此目录可以被当做文件处理。例如, 你会发现DOS的文件都具有&quot;可执行&quot;权限, 但用execve()执行时则会失败。</li></ul> <p>返回值：</p> <ul><li>若所有欲查核的权限都通过了检查则返回0值, 表示成功, 只要有一权限被禁止则返回-1。</li></ul> <p>错误代码：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>EACCESS 参数pathname 所指定的文件不符合所要求测试的权限。
EROFS 欲测试写入权限的文件存在于只读文件系统内。
EFAULT 参数pathname指针超出可存取内存空间。
EINVAL 参数mode 不正确。
ENAMETOOLONG 参数pathname太长。
ENOTDIR 参数pathname为一目录。
ENOMEM 核心内存不足
ELOOP 参数pathname有过多符号连接问题。
EIO I<span class="token operator">/</span>O 存取错误。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="信号处理"><a href="#信号处理" class="header-anchor">#</a> 信号处理</h2> <h3 id="mkfifo"><a href="#mkfifo" class="header-anchor">#</a> mkfifo</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;sys/types.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;sys/stat.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">mkfifo</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> pathname<span class="token punctuation">,</span><span class="token class-name">mode_t</span> mode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>描述：</p> <ul><li>mkfifo()会依参数pathname建立特殊的FIFO文件, 该文件必须不存在, 而参数mode为该文件的权限(mode%~umask), 因此umask值也会影响到FIFO文件的权限。</li> <li>Mkfifo()建立的FIFO文件其他进程都可以用读写一般文件的方式存取。当使用open()来打开FIFO文件时, O_NONBLOCK旗标会有影响
<ol><li>当使用O_NONBLOCK 旗标时, 打开FIFO 文件来读取的操作会立刻返回, 但是若还没有其他进程打开FIFO 文件来读取, 则写入的操作会返回ENXIO 错误代码。</li> <li>没有使用O_NONBLOCK 旗标时, 打开FIFO 来读取的操作会等到其他进程打开FIFO文件来写入才正常返回。同样地, 打开FIFO文件来写入的操作会等到其他进程打开FIFO 文件来读取后才正常返回。</li></ol></li></ul> <p>返回值：</p> <p>若成功则返回0, 否则返回-1, 错误原因存于errno中。</p> <h3 id="sigaction"><a href="#sigaction" class="header-anchor">#</a> sigaction</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;signal.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">sigaction</span><span class="token punctuation">(</span><span class="token keyword">int</span> signum<span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">struct</span> <span class="token class-name">sigaction</span> <span class="token operator">*</span>act <span class="token punctuation">,</span><span class="token keyword">struct</span> <span class="token class-name">sigaction</span> <span class="token operator">*</span>oldact<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>描述：</p> <p>sigaction()会依参数<strong>signum</strong>指定的信号编号来设置该信号的处理函数。参数signum可以指定SIGKILL和SIGSTOP以外的所有信号。</p> <p><code>act</code>是一个指向<code>struct sigaction</code>类型的指针，指向新的信号处理函数；<code>oldact</code>是一个指向<code>struct sigaction</code>类型的指针，用于保存旧的信号处理函数</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>参数结构sigaction定义如下
<span class="token keyword">struct</span> <span class="token class-name">sigaction</span>
<span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>sa_handler<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">sigset_t</span> sa_mask<span class="token punctuation">;</span>
    <span class="token keyword">int</span> sa_flags<span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>sa_restorer<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
sa_handler此参数和<span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的参数handler相同<span class="token punctuation">,</span> 代表新的信号处理函数<span class="token punctuation">,</span> 其他意义请参考<span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>。
sa_mask 用来设置在处理该信号时暂时将sa_mask 指定的信号搁置。
sa_restorer 此参数没有使用。
sa_flags 用来设置信号处理的其他相关操作<span class="token punctuation">,</span> 下列的数值可用：
    OR 运算<span class="token punctuation">(</span><span class="token operator">|</span><span class="token punctuation">)</span>组合
    A_NOCLDSTOP <span class="token operator">:</span> 如果参数signum为SIGCHLD<span class="token punctuation">,</span> 则当子进程暂停时并不会通知父进程
    SA_ONESHOT<span class="token operator">/</span>SA_RESETHAND<span class="token operator">:</span>当调用新的信号处理函数前<span class="token punctuation">,</span> 将此信号处理方式改为系统预设的方式。
    SA_RESTART<span class="token operator">:</span>被信号中断的系统调用会自行重启
    SA_NOMASK<span class="token operator">/</span>SA_NODEFER<span class="token operator">:</span>在处理此信号未结束前不理会此信号的再次到来。
    如果参数oldact不是<span class="token constant">NULL</span>指针<span class="token punctuation">,</span> 则原来的信号处理方式会由此结构sigaction 返回。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>返回值：</p> <p>执行成功则返回0, 如果有错误则返回-1。</p> <p>错误代码：</p> <p>EINVAL 参数signum 不合法, 或是企图拦截SIGKILL/SIGSTOPSIGKILL信号
EFAULT 参数act, oldact指针地址无法存取。
EINTR 此调用被中断</p> <h3 id="sigfillset"><a href="#sigfillset" class="header-anchor">#</a> sigfillset</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;signal.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">sigfillset</span><span class="token punctuation">(</span><span class="token class-name">sigset_t</span> <span class="token operator">*</span> set<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>描述：</p> <p>sigfillset()用来将参数<strong>set</strong>信号集初始化, 然后把所有的信号加入到此信号集里。</p> <p>返回值：</p> <p>执行成功则返回0, 如果有错误则返回-1。</p> <p>附加说明：</p> <p>EFAULT 参数set指针地址无法存取</p> <h3 id="strerror"><a href="#strerror" class="header-anchor">#</a> strerror</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string.h&gt;</span></span>
<span class="token keyword">char</span> <span class="token operator">*</span> <span class="token function">strerror</span><span class="token punctuation">(</span><span class="token keyword">int</span> errnum<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>说明：</p> <p>strerror()用来依参数<strong>errnum</strong>的错误代码来查询其错误原因的描述字符串, 然后将该字符串指针返回。</p> <p>返回值：</p> <p>返回描述错误原因的字符串指针。</p> <h2 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h2> <h3 id="assert"><a href="#assert" class="header-anchor">#</a> assert</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;assert.h&gt;
void assert(int expression);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>描述：</p> <p>C 库宏 <strong>void assert(int expression)</strong> 允许诊断信息被写入到标准错误文件中。换句话说，它可用于在 C 程序中添加诊断。</p> <p>参数：</p> <ul><li><strong>expression</strong> -- 这可以是一个变量或任何 C 表达式。如果 <strong>expression</strong> 为 TRUE，assert() 不执行任何动作。如果 <strong>expression</strong> 为 FALSE，assert() 会在标准错误 stderr 上显示错误消息，并中止程序执行。</li></ul> <p>返回值：</p> <p>这个宏不返回任何值</p> <h3 id="snprintf"><a href="#snprintf" class="header-anchor">#</a> snprintf</h3> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">snprintf</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">,</span> size_t size<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> format<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>snprintf：是一个C标准库函数，用于格式化字符串并将结果输出到指定的缓冲区中。它的函数原型如下：</p> <p>参数说明：</p> <ul><li><code>str</code>：指向目标缓冲区的指针，用于存储格式化后的字符串。</li> <li><code>size</code>：目标缓冲区的大小，包括结尾的空字符<code>\0</code>。确保缓冲区足够大以容纳格式化后的字符串，以防止缓冲区溢出。</li> <li><code>format</code>：格式字符串，指定输出的格式。</li> <li><code>...</code>：可变参数，根据格式字符串中的格式指示符进行替换。</li></ul> <p><code>snprintf</code>函数的工作方式与<code>printf</code>类似，但<strong>不是将结果输出到标准输出，而是将结果格式化并存储到指定的缓冲区中</strong>。</p> <p>返回值：</p> <p>它返回写入缓冲区的字符数（不包括结尾的空字符<code>\0</code>），如果写入的字符数超过了缓冲区的大小，则返回欲写入的字符数（不包括结尾的空字符<code>\0</code>）。</p> <h3 id="usleep"><a href="#usleep" class="header-anchor">#</a> usleep</h3> <p>简单地说， usleep 函数实现的功能是 让程序休眠若干「微秒」，时间的最小刻度是「微秒」，10的负6次方 秒。</p> <p>返回值：</p> <p>网上查到的是：成功返回0，出错返回-1。</p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/smileatl/smileatlRepository_source/edit/master/docs/05.工作/30.计算机知识-操作系统/02.Linux系统函数.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/08/11, 13:56:36</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/e95e53/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">8-6-归并排序+基数排序+各种排序方法比较</div></a> <a href="/pages/cfe0e1/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Linux网络编程</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/e95e53/" class="prev">8-6-归并排序+基数排序+各种排序方法比较</a></span> <span class="next"><a href="/pages/cfe0e1/">Linux网络编程</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/93a902/"><div>
            cpp新特性
            <!----></div></a> <span class="date">12-04</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/163c8a/"><div>
            复刷还是没记住的题
            <!----></div></a> <span class="date">12-04</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/2aa569/"><div>
            计算机网络
            <!----></div></a> <span class="date">12-04</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1355484300@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/smileatl" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2023
    <span>smileatl | <a href="https://github.com/smileatl/smileatlRepository_source/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4813674f.js" defer></script><script src="/assets/js/3.cf27d530.js" defer></script><script src="/assets/js/97.8ce2cb69.js" defer></script>
  </body>
</html>
